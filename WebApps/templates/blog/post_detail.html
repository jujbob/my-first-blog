{% extends 'blog/base.html' %}

{% block content %}
    {% load staticfiles %}

    <div class="page animated fadeinright">

        <div class="hero-header animated fadeindown">
            <div class="floating-button animated bouncein delay-3">
            <span class="btn-floating resize btn-large waves-effect waves-light accent-color btn z-depth-1">
              <i class="ion-android-bookmark"></i>
            </span>
            </div>
        </div>

        <!-- Slider -->
        <div class="swiper-container slider m-b-20">
            <div class="swiper-wrapper">
                <div class="swiper-slide">
                    <img src="{% static 'img/7.jpg' %}" alt="">
                </div>
                <div class="swiper-slide">
                    <img src="{% static 'img/3.jpg' %}" alt="">
                </div>
            </div>
            <!-- Add Pagination -->
            <div class="swiper-pagination"></div>
        </div>
        <!-- End of Slider -->
        <!-- Article Content -->
        <div class="animated article fadeinup delay-1">
            <div class="p-5">
                <h5 style="margin-bottom: 10px;font-weight: 600">{{ post.title }}</h5>
                <div class="social-share-author animated fadeinright delay-2">
                    <div>
                        <img src="{% static 'img/user5.jpg' %}" alt="" class="avatar">
                        <span class="small">
                            {{ post.author.username }}
                            {% if post.author == request.user or request.user.is_staff  %}
                                <div style="float: right"><a class="btn-floating" style="text-align: center;" href="{% url 'post_remove' pk=post.pk %}">삭제</a> &nbsp; <a class="btn-floating" style="text-align: center;" href="{% url 'post_edit' pk=post.pk %}">수정</a></div>
                            {% endif %}
                            <p style="margin-bottom: 10px">{{ post.created_date }}</p>
                        </span>
                    </div>
                </div>
                <p class="text-flow" style="margin-bottom: 10px"> <!-- <span class="dropcap"> A </span> -->  {{ post.text }}</p>
           <!--     <blockquote class="primary-border">"The quick, brown fox jumps over a lazy dog. DJs flock by when MTV ax quiz prog."</blockquote> -->
             <!--   <p class="text-flow"><b>I am alone:</b> and feel the charm of existence in thisspot, which was created for the bliss of souls like mine. I am so happy, my dear friend, so absorbed in the exquisite sense of mere tranquil existence, that I neglect my talents.</p> -->

                <!-- Share -->
                <div class="share center-align">
                  <span>Share it!</span>
                    <i class="ion-social-facebook p-5 blue-text text-darken-4"></i>
                    <i class="ion-social-twitter p-5 blue-text"></i>
                    <i class="ion-social-pinterest p-5 red-text"></i>
                </div>

            <!-- comments -->
                <div class="comments grey lighten-4">
                    {% for comment in post.comments.all %}

                        <div class="media-top-object animated fadeinright delay-2">
                            <img src="{% static 'img/user5.jpg' %}" alt="" class="media-left avatar">
                            <div class="media-body">
                                <span class="small"> <b>{{ comment.author.username }}</b>
                                    <div style="float: right">
                                        {% if comment.author == request.user %}
                                            <a class="btn-floating" style="width: 30px;height: 30px;line-height: 30px;border-radius: 10%; text-align: center" href="{% url 'comment_remove' pk=comment.pk %}">삭제</a>
                                        {% endif %}
                                            <a class="btn-floating" style="width: 30px;height: 30px;line-height: 30px;border-radius: 10%; text-align: center" href="{% url 'add_subComment_to_post' post_pk=post.pk comment_pk=comment.pk %}">리플</a>
                                    </div>
                                    <p class="small">{{ comment.created_date }}</p>
                                </span>
                                <span>{{ comment.text }}</span>
                            </div>
                        </div>

                        {% for subComment in comment.subComments.all %} <!-- start point about subComments -->
                            <div class="media-top-object animated fadeinright delay-2">

                                <img src="{% static 'img/reply.gif' %}" alt="" class="media-left reply" >
                                <img src="{% static 'img/user5.jpg' %}" alt="" class="media-left avatar">
                                <div class="media-body">
                                        <span class="small"> <b>{{ subComment.author.username }}</b>
                                            <div style="float: right">
                                                {% if subComment.author == request.user %}
                                                    <a class="btn-floating" style="width: 30px;height: 30px;line-height: 30px;border-radius: 10%; text-align: center" href="{% url 'subComment_remove' pk=subComment.pk %}">삭제</a>
                                                {% endif %}
                                            </div>
                                            <p class="small"> {{ subComment.created_date }} </p>
                                        </span>
                                    <span class="small">{{ subComment.text|linebreaks }}</span>
                                </div>
                            </div>

                        {% endfor %}

                    {% empty %}
                        <span>No comments here yet :(</span>
                    {% endfor %}
                    <a class="btn btn-default" href="{% url 'add_comment_to_post' pk=post.pk %}">Add comment</a>
                </div>
            </div>
        </div>
    </div>
{% endblock %}